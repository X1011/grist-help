<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../images/favicon.png">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Reference columns - Grist Help Center</title>
    <link href="../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">
    <link href="../css/grist.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../js/jquery-3.2.1.min.js"></script>
    <script src="../js/bootstrap-3.3.7.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Reference columns", url: "#_top", children: [
              {title: "Overview", url: "#overview" },
              {title: "Creating a new reference column", url: "#creating-a-new-reference-column" },
              {title: "Adding values to a reference column", url: "#adding-values-to-a-reference-column" },
              {title: "Converting text column to reference", url: "#converting-text-column-to-reference" },
              {title: "Including multiple fields from a reference", url: "#including-multiple-fields-from-a-reference" },
          ]},
        ];

    </script>
    <script src="../js/base.js"></script>
      <script src="../js/grist.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav">
      <a href="../col-type-conversion/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../col-type-conversion/" class="btn btn-xs btn-link">
        Type conversions
      </a>
    </div>
    
  </div>

    

    <h1 id="reference-columns">Reference columns<a class="headerlink" href="#reference-columns" title="Permanent link">#</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">#</a></h2>
<p>Reference columns in Grist allow one table to create an explicit reference to another. In the
database world this is similar to a foreign key. In the spreadsheet world this is similar to a
<code>VLOOKUP</code>, but much more powerful and easier to use.</p>
<p>In this guide we&rsquo;ll use the term <strong>underlying table</strong> for the table that lists all available values,
and <strong>referencing table</strong> for the table that uses those values.</p>
<h2 id="creating-a-new-reference-column">Creating a new reference column<a class="headerlink" href="#creating-a-new-reference-column" title="Permanent link">#</a></h2>
<p>Suppose we have a document with two tables, Clients and Projects.  The Clients table lists
our clients - names, contacts, signing dates - and the Projects table lists projects we do for
clients.</p>
<p><img alt="Reference motivation" src="../images/columns/columns-reference-clients-projects.png" /></p>
<p>There are all sorts of things Grist can do for us if we let it know that the Client column
in the Projects table is referring to clients listed in the Clients table.  We can do this
by converting the Client column to a &ldquo;reference column&rdquo;.  Open the Column Options side
panel (see <a href="col-types#specifying-a-type">Specifying a type</a>) and set the &ldquo;Column Type&rdquo;
to &ldquo;Reference&rdquo;.  Adjust the &ldquo;Data from Table&rdquo; option to be the correct table you want
to cross-reference, and the &ldquo;Show Column&rdquo; option to match which column of that table
you&rsquo;d like to show.  Then hit &ldquo;Apply&rdquo; when you&rsquo;re happy with the result.</p>
<p><img alt="Reference set-up" src="../images/columns/columns-reference-link-client.png" /></p>
<div class="admonition note">
<p class="admonition-title">Understanding the reference</p>
<p>The column value always references the entire <strong>record</strong> in the underlying table. The displayed
value can be any column from that record, as selected in <code>Show Column</code>. You can also include
additional columns to display as explained later.</p>
</div>
<p>In our example, you can see little link icons appearing in the Client
column cells, showing that they have been successfully cross-referenced with the Clients table.
Once the column type is set, you can start typing into it or double-click it to see a dropdown
list of all available values. </p>
<p class="screenshot-half"><em><img alt="Select dropdown values" src="../images/column-ref-select-dropdown.png" /></em></p>
<div class="admonition note">
<p class="admonition-title">Spotting reference columns</p>
<p>You can tell that the values in a column represent a reference by the link icon that appears
next to the values.</p>
</div>
<p>If you accidentally type in a value that is not present in the <code>Clients</code> table, its value will be
highlighted as invalid:</p>
<p class="screenshot-half"><em><img alt="Invalid reference value" src="../images/column-ref-invalid.png" /></em></p>
<h2 id="adding-values-to-a-reference-column">Adding values to a reference column<a class="headerlink" href="#adding-values-to-a-reference-column" title="Permanent link">#</a></h2>
<p>Sometimes it&rsquo;s useful to add a new value to the dropdown list without having to switch to the
underlying table. Reference columns make it easy! Just type in the value you want add and select the
<code>+</code> value in the dropdown list. Grist will automatically add a new record containing this value to
the underlying table and insert the proper reference:</p>
<p class="screenshot-half"><em><img alt="Add reference value" src="../images/column-ref-add-value.png" /></em></p>
<h2 id="converting-text-column-to-reference">Converting text column to reference<a class="headerlink" href="#converting-text-column-to-reference" title="Permanent link">#</a></h2>
<p>When working with existing data, it&rsquo;s common to have existing text values that should really be
reference values. Don&rsquo;t worry, conversion is simple! Just change the column type to <code>Reference</code> and
Grist will automatically find and substitute matching values for references. If some values are not
found, they&rsquo;ll be shown as invalid. You can then either add them to the underlying table or select
the proper values for them.</p>
<p>In this example, the first three values match perfectly, but <code>Forest Labs</code> is invalid because it
doesn&rsquo;t exist in the <code>Clients</code> table:</p>
<p><img alt="Convert values after" src="../images/column-ref-convert-after.png" /></p>
<h2 id="including-multiple-fields-from-a-reference">Including multiple fields from a reference<a class="headerlink" href="#including-multiple-fields-from-a-reference" title="Permanent link">#</a></h2>
<p>A big benefit of reference columns is that they allow you to easily bring in multiple columns from
the underlying table. In our example, if you wanted to bring in <code>$Client.Contact</code> to the <code>Projects</code>
table, you can just select the <code>Contact</code> column from the <code>Add Reference Columns</code> section and it will be
automatically added to the <code>Projects</code> table:</p>
<p><img alt="Additional columns inserted" src="../images/column-ref-other-columns.png" /></p>
<p>If you&rsquo;re comfortable using formulas, you can see that the added column is just the formula
<code>=$Client.Contact</code>. If you were so inclined, you could achieve the same result by manually adding
the formula column. You can also use any other fields from <code>Clients</code> table by referencing <code>$Client</code>
in formulas in the <code>Projects</code> table.</p>
<p class="screenshot-half"><em><img alt="Additional columns as formulas" src="../images/column-ref-other-formula.png" /></em></p>
<div class="admonition note">
<p class="admonition-title">Using references in formulas</p>
<p>You may have noticed that the underlying table is <code>Clients</code> (plural) but the formula is
<code>$Client.Contact</code> (singular). That&rsquo;s because the formula refers to the referencing column,
<strong>not</strong> the underlying table. In our example, the referencing column is <code>Client</code>.</p>
</div>

  <br>
</div>

<footer class="col-md-12 wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>